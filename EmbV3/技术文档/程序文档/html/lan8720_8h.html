<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EwayEmb0.3: D:/SVN/trunk/EwayBotEmbSys/EwayBotEmbV0.2.新协议稳定版/User/bsp/ETHERNET/lan8720.h 文件参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EwayEmb0.3
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','搜索');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_6d4e12d46ad8519ff7b80e874016d102.html">User</a></li><li class="navelem"><a class="el" href="dir_c577b749049dc49cc6a11c70bc2bb203.html">bsp</a></li><li class="navelem"><a class="el" href="dir_2051d8ffa1e9a8b419b36a03123ba072.html">ETHERNET</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">宏定义</a> &#124;
<a href="#func-members">函数</a> &#124;
<a href="#var-members">变量</a>  </div>
  <div class="headertitle">
<div class="title">lan8720.h 文件参考</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;stm32f4xx.h&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="stm32f4x7__eth_8h_source.html">stm32f4x7_eth.h</a>&quot;</code><br />
</div>
<p><a href="lan8720_8h_source.html">浏览源代码.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
宏定义</h2></td></tr>
<tr class="memitem:aa7545f9f15ad58b8f496376b713faee9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#aa7545f9f15ad58b8f496376b713faee9">LAN8720_PHY_ADDRESS</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:aa7545f9f15ad58b8f496376b713faee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0e5c40c7c09acb02d09117ae230ed27"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#ae0e5c40c7c09acb02d09117ae230ed27">LAN8720_RST</a>&#160;&#160;&#160;<a class="el" href="_eway_g_p_i_o_8h.html#a1ec30e9120e8acb643286f6aa1108b81">PDout</a>(3)</td></tr>
<tr class="separator:ae0e5c40c7c09acb02d09117ae230ed27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:aab64058e4d5e7068de8796f4967468cb"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#aab64058e4d5e7068de8796f4967468cb">LAN8720_Init</a> (void)</td></tr>
<tr class="separator:aab64058e4d5e7068de8796f4967468cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba3e5334e3b8b90da879e5bba8db48bf"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#aba3e5334e3b8b90da879e5bba8db48bf">LAN8720_Get_Speed</a> (void)</td></tr>
<tr class="separator:aba3e5334e3b8b90da879e5bba8db48bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a040743fa91e95203428d08c8e96ee938"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#a040743fa91e95203428d08c8e96ee938">ETH_MACDMA_Config</a> (void)</td></tr>
<tr class="separator:a040743fa91e95203428d08c8e96ee938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac041d42a8f9e10741dc23956ff3076ac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_frame_type_def.html">FrameTypeDef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#ac041d42a8f9e10741dc23956ff3076ac">ETH_Rx_Packet</a> (void)</td></tr>
<tr class="separator:ac041d42a8f9e10741dc23956ff3076ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a162a2a64d1e15382e7369ca2fd4e07e6"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#a162a2a64d1e15382e7369ca2fd4e07e6">ETH_Tx_Packet</a> (u16 FrameLength)</td></tr>
<tr class="separator:a162a2a64d1e15382e7369ca2fd4e07e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a775939a097b149cf4a37c6f80d1fb06b"><td class="memItemLeft" align="right" valign="top">u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#a775939a097b149cf4a37c6f80d1fb06b">ETH_GetCurrentTxBuffer</a> (void)</td></tr>
<tr class="separator:a775939a097b149cf4a37c6f80d1fb06b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a166a3c12339d64b6545d091c13121a4b"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#a166a3c12339d64b6545d091c13121a4b">ETH_Mem_Malloc</a> (void)</td></tr>
<tr class="separator:a166a3c12339d64b6545d091c13121a4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fb4dfb03c6b1a79b74d02fbab723156"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#a3fb4dfb03c6b1a79b74d02fbab723156">ETH_Mem_Free</a> (void)</td></tr>
<tr class="separator:a3fb4dfb03c6b1a79b74d02fbab723156"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
变量</h2></td></tr>
<tr class="memitem:a9f40ac048abe15c5a78317dc8cbec4f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#a9f40ac048abe15c5a78317dc8cbec4f0">DMARxDscrTab</a></td></tr>
<tr class="separator:a9f40ac048abe15c5a78317dc8cbec4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a920a8f0f87c36e36706f6451f6b90152"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#a920a8f0f87c36e36706f6451f6b90152">DMATxDscrTab</a></td></tr>
<tr class="separator:a920a8f0f87c36e36706f6451f6b90152"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af34dce86974420c070b2354fbd7e045e"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#af34dce86974420c070b2354fbd7e045e">Rx_Buff</a></td></tr>
<tr class="separator:af34dce86974420c070b2354fbd7e045e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8719ffa27fb73862d0f77656bfd92d5"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#ad8719ffa27fb73862d0f77656bfd92d5">Tx_Buff</a></td></tr>
<tr class="separator:ad8719ffa27fb73862d0f77656bfd92d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad976d6d263332c7033345f1802063bd5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#ad976d6d263332c7033345f1802063bd5">DMATxDescToSet</a></td></tr>
<tr class="separator:ad976d6d263332c7033345f1802063bd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11dd23e5e921c7799fe4083d2ab77df4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#a11dd23e5e921c7799fe4083d2ab77df4">DMARxDescToGet</a></td></tr>
<tr class="separator:a11dd23e5e921c7799fe4083d2ab77df4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac299761c873bc0800842161379044225"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_e_t_h___d_m_a___rx___frame__infos.html">ETH_DMA_Rx_Frame_infos</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lan8720_8h.html#ac299761c873bc0800842161379044225">DMA_RX_FRAME_infos</a></td></tr>
<tr class="separator:ac299761c873bc0800842161379044225"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">宏定义说明</h2>
<a id="aa7545f9f15ad58b8f496376b713faee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7545f9f15ad58b8f496376b713faee9">&#9670;&nbsp;</a></span>LAN8720_PHY_ADDRESS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LAN8720_PHY_ADDRESS&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="lan8720_8h_source.html">lan8720.h</a> 第 <a class="el" href="lan8720_8h_source.html#l00025">25</a> 行定义.</p>

<p class="reference">参考自 <a class="el" href="lan8720_8c_source.html#l00124">ETH_MACDMA_Config()</a>.</p>

</div>
</div>
<a id="ae0e5c40c7c09acb02d09117ae230ed27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0e5c40c7c09acb02d09117ae230ed27">&#9670;&nbsp;</a></span>LAN8720_RST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LAN8720_RST&#160;&#160;&#160;<a class="el" href="_eway_g_p_i_o_8h.html#a1ec30e9120e8acb643286f6aa1108b81">PDout</a>(3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="lan8720_8h_source.html">lan8720.h</a> 第 <a class="el" href="lan8720_8h_source.html#l00026">26</a> 行定义.</p>

<p class="reference">参考自 <a class="el" href="lan8720_8c_source.html#l00034">LAN8720_Init()</a>.</p>

</div>
</div>
<h2 class="groupheader">函数说明</h2>
<a id="a775939a097b149cf4a37c6f80d1fb06b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a775939a097b149cf4a37c6f80d1fb06b">&#9670;&nbsp;</a></span>ETH_GetCurrentTxBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u32 ETH_GetCurrentTxBuffer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="lan8720_8c_source.html">lan8720.c</a> 第 <a class="el" href="lan8720_8c_source.html#l00240">240</a> 行定义.</p>

<p class="reference">参考 <a class="el" href="stm32f4x7__eth_8h_source.html#l00257">ETH_DMADESCTypeDef::Buffer1Addr</a> , 以及 <a class="el" href="stm32f4x7__eth_8c_source.html#l00081">DMATxDescToSet</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{  </div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="lan8720_8h.html#ad976d6d263332c7033345f1802063bd5">DMATxDescToSet</a>-&gt;<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#a547988bebe5343111df7420184d22194">Buffer1Addr</a>;<span class="comment">//返回Tx buffer地址  </span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div><div class="ttc" id="lan8720_8h_html_ad976d6d263332c7033345f1802063bd5"><div class="ttname"><a href="lan8720_8h.html#ad976d6d263332c7033345f1802063bd5">DMATxDescToSet</a></div><div class="ttdeci">ETH_DMADESCTypeDef * DMATxDescToSet</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8c_source.html#l00081">stm32f4x7_eth.c:81</a></div></div>
<div class="ttc" id="struct_e_t_h___d_m_a_d_e_s_c_type_def_html_a547988bebe5343111df7420184d22194"><div class="ttname"><a href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#a547988bebe5343111df7420184d22194">ETH_DMADESCTypeDef::Buffer1Addr</a></div><div class="ttdeci">uint32_t Buffer1Addr</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00257">stm32f4x7_eth.h:257</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a040743fa91e95203428d08c8e96ee938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a040743fa91e95203428d08c8e96ee938">&#9670;&nbsp;</a></span>ETH_MACDMA_Config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 ETH_MACDMA_Config </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>网络MAC参数设置 </p>

<p class="definition">在文件 <a class="el" href="lan8720_8c_source.html">lan8720.c</a> 第 <a class="el" href="lan8720_8c_source.html#l00124">124</a> 行定义.</p>

<p class="reference">参考 <a class="el" href="stm32f4x7__eth_8h_source.html#l00226">ETH_InitTypeDef::ETH_AddressAlignedBeats</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01318">ETH_AddressAlignedBeats_Enable</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00128">ETH_InitTypeDef::ETH_AutomaticPadCRCStrip</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00767">ETH_AutomaticPadCRCStrip_Disable</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00086">ETH_InitTypeDef::ETH_AutoNegotiation</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00622">ETH_AutoNegotiation_Enable</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00146">ETH_InitTypeDef::ETH_BroadcastFramesReception</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00846">ETH_BroadcastFramesReception_Enable</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00121">ETH_InitTypeDef::ETH_ChecksumOffload</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00742">ETH_ChecksumOffload_Enable</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l00133">ETH_DeInit()</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01473">ETH_DMA_IT_NIS</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01481">ETH_DMA_IT_R</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00240">ETH_InitTypeDef::ETH_DMAArbitration</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01413">ETH_DMAArbitration_RoundRobin_RxTx_2_1</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l01831">ETH_DMAITConfig()</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00197">ETH_InitTypeDef::ETH_DropTCPIPChecksumErrorFrame</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01201">ETH_DropTCPIPChecksumErrorFrame_Enable</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00229">ETH_InitTypeDef::ETH_FixedBurst</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01330">ETH_FixedBurst_Enable</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00212">ETH_InitTypeDef::ETH_ForwardErrorFrames</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01269">ETH_ForwardErrorFrames_Disable</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00215">ETH_InitTypeDef::ETH_ForwardUndersizedGoodFrames</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01280">ETH_ForwardUndersizedGoodFrames_Disable</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l01720">ETH_GetSoftwareResetStatus()</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l00252">ETH_Init()</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00115">ETH_InitTypeDef::ETH_LoopbackMode</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00719">ETH_LoopbackMode_Disable</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00155">ETH_InitTypeDef::ETH_MulticastFramesFilter</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00884">ETH_MulticastFramesFilter_Perfect</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00152">ETH_InitTypeDef::ETH_PromiscuousMode</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00871">ETH_PromiscuousMode_Disable</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00137">ETH_InitTypeDef::ETH_ReceiveAll</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00807">ETH_ReceiveAll_Disable</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00200">ETH_InitTypeDef::ETH_ReceiveStoreForward</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01212">ETH_ReceiveStoreForward_Enable</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00124">ETH_InitTypeDef::ETH_RetryTransmission</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00755">ETH_RetryTransmission_Disable</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00232">ETH_InitTypeDef::ETH_RxDMABurstLength</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01347">ETH_RxDMABurstLength_32Beat</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00222">ETH_InitTypeDef::ETH_SecondFrameOperate</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01306">ETH_SecondFrameOperate_Enable</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l01708">ETH_SoftwareReset()</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l00145">ETH_StructInit()</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01773">ETH_SUCCESS</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00206">ETH_InitTypeDef::ETH_TransmitStoreForward</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01234">ETH_TransmitStoreForward_Enable</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00235">ETH_InitTypeDef::ETH_TxDMABurstLength</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01380">ETH_TxDMABurstLength_32Beat</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00158">ETH_InitTypeDef::ETH_UnicastFramesFilter</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00901">ETH_UnicastFramesFilter_Perfect</a>, <a class="el" href="lan8720_8h_source.html#l00025">LAN8720_PHY_ADDRESS</a>, <a class="el" href="lan8720_8c.html#a2fc516759634217a41cc9944b74fbd9c">lwip_packet_handler()</a> , 以及 <a class="el" href="stm32f4x7__eth_8h_source.html#l00242">ETH_InitTypeDef::Sys_Clock_Freq</a>.</p>

<p class="reference">参考自 <a class="el" href="lan8720_8c_source.html#l00034">LAN8720_Init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        u8 rval;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="struct_e_t_h___init_type_def.html">ETH_InitTypeDef</a> ETH_InitStructure; </div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    </div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">//使能以太网时钟</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_ETH_MAC | RCC_AHB1Periph_ETH_MAC_Tx |RCC_AHB1Periph_ETH_MAC_Rx, ENABLE);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  </div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="group___e_t_h___private___functions.html#ga0d96b5b1d88725ebdac89e28b786ec84">ETH_DeInit</a>();                               <span class="comment">//AHB总线重启以太网</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    </div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="group___e_t_h___private___functions.html#gac5b991b83a1a26f4d3fdfcb44a9e2961">ETH_SoftwareReset</a>();                        <span class="comment">//软件重启网络ETH_SoftwareReset();</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="group___e_t_h___private___functions.html#ga92fe59489331817a185f80d4ffdebc6a">ETH_GetSoftwareResetStatus</a>() == SET);<span class="comment">//等待软件重启网络完成 </span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="comment">//RCC-&gt;AHB1ENR|=7&lt;&lt;25;//使能ETH MAC/MAC_Tx/MAC_Rx时钟</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="group___e_t_h___private___functions.html#ga53f3d018eab9974662e4bfd00671e900">ETH_StructInit</a>(&amp;ETH_InitStructure);         <span class="comment">//初始化网络为默认值  </span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">    ///网络MAC参数设置 </span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"></span>    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a563325f01689a6e36ba4daeec6ee9b02">ETH_AutoNegotiation</a> = <a class="code" href="group___e_t_h___auto_negotiation.html#ga8dfcaadec110d690ff16d23b02a6dbcf">ETH_AutoNegotiation_Enable</a>;             <span class="comment">//开启网络自适应功能</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a34575b892af284b8a40baa34bdcc88b7">ETH_LoopbackMode</a> = <a class="code" href="group___e_t_h___loop___back___mode.html#ga10d7d136a17281b5cabe9f32b7105ea6">ETH_LoopbackMode_Disable</a>;                  <span class="comment">//关闭反馈</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a8c4bbe2cf7d3487e836eeaec6d5ef8f8">ETH_RetryTransmission</a> = <a class="code" href="group___e_t_h___retry___transmission.html#ga8cfe8aa3869178938174e6b069ad3cc8">ETH_RetryTransmission_Disable</a>;        <span class="comment">//关闭重传功能kp</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#abd14492b2b914503b4fa75cff478af42">ETH_AutomaticPadCRCStrip</a> = <a class="code" href="group___e_t_h___automatic___pad___c_r_c___strip.html#gade619eb408c23e8ed12bc9144db5a140">ETH_AutomaticPadCRCStrip_Disable</a>;  <span class="comment">//关闭自动去除PDA/CRC功能 </span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#afdd4de2974d6af1f7056ba560ad3e52d">ETH_ReceiveAll</a> = <a class="code" href="group___e_t_h___receive___all.html#gac6b5bd518b78adc926a982630b6002e6">ETH_ReceiveAll_Disable</a>;                      <span class="comment">//关闭接收所有的帧</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a8d5b5a12df4848fc44b609f47085d159">ETH_BroadcastFramesReception</a> = <a class="code" href="group___e_t_h___broadcast___frames___reception.html#ga423a3eb93f12af197e50725770aa1bf2">ETH_BroadcastFramesReception_Enable</a>;<span class="comment">//允许接收所有广播帧</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a08f07205d16cbe7a35ee066e3a5c55e7">ETH_PromiscuousMode</a> = <a class="code" href="group___e_t_h___promiscuous___mode.html#ga18e9c873cdbb7a44b954df49ce9b760b">ETH_PromiscuousMode_Disable</a>;            <span class="comment">//关闭混合模式的地址过滤  </span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a0b137cf6aad74ac5a7f5bda3a5729b59">ETH_MulticastFramesFilter</a> = <a class="code" href="group___e_t_h___multicast___frames___filter.html#ga6dcd4bb57280ce41f4f6bf3b673e85a4">ETH_MulticastFramesFilter_Perfect</a>;<span class="comment">//对于组播地址使用完美地址过滤   </span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a09bd5f8a057289f179b0398cc7306c89">ETH_UnicastFramesFilter</a> = <a class="code" href="group___e_t_h___unicast___frames___filter.html#ga5d3d063e0b68e9870356369336c406b0">ETH_UnicastFramesFilter_Perfect</a>;    <span class="comment">//对单播地址使用完美地址过滤 </span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#ifdef CHECKSUM_BY_HARDWARE</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a757fced05a76ee31233fce12aee6c4a6">ETH_ChecksumOffload</a> = <a class="code" href="group___e_t_h___checksum___offload.html#ga8ccef3ab0b689125c440288722fb515b">ETH_ChecksumOffload_Enable</a>;             <span class="comment">//开启ipv4和TCP/UDP/ICMP的帧校验和卸载   </span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">//当我们使用帧校验和卸载功能的时候，一定要使能存储转发模式,存储转发模式中要保证整个帧存储在FIFO中,</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">//这样MAC能插入/识别出帧校验值,当真校验正确的时候DMA就可以处理帧,否则就丢弃掉该帧</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a9c2ab5db2ec930aae94b037822243c2b">ETH_DropTCPIPChecksumErrorFrame</a> = <a class="code" href="group___e_t_h___drop___t_c_p___i_p___checksum___error___frame.html#gae21d399e629407049e96d6bee5e04371">ETH_DropTCPIPChecksumErrorFrame_Enable</a>; <span class="comment">//开启丢弃TCP/IP错误帧</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a02c9dad3f1d0c40b684613dd6616f5ee">ETH_ReceiveStoreForward</a> = <a class="code" href="group___e_t_h___receive___store___forward.html#ga727f58780535be5c44028c33ea4af4a3">ETH_ReceiveStoreForward_Enable</a>;     <span class="comment">//开启接收数据的存储转发模式    </span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a5459fcb434ee80976302b4e394c6548e">ETH_TransmitStoreForward</a> = <a class="code" href="group___e_t_h___transmit___store___forward.html#gac4e039b50eb9413c0fc3f5159ee730cf">ETH_TransmitStoreForward_Enable</a>;   <span class="comment">//开启发送数据的存储转发模式  </span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a09f4642d4bc64b05e1d306413962cad2">ETH_ForwardErrorFrames</a> = <a class="code" href="group___e_t_h___forward___error___frames.html#ga2c2d4ee2e78cd6c53679edc087fa6bee">ETH_ForwardErrorFrames_Disable</a>;      <span class="comment">//禁止转发错误帧  </span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a1a5596b902d3915a033b3a6d78b2a839">ETH_ForwardUndersizedGoodFrames</a> = <a class="code" href="group___e_t_h___forward___undersized___good___frames.html#ga4bafcb985b29483df8cd90fe6b495aab">ETH_ForwardUndersizedGoodFrames_Disable</a>;    <span class="comment">//不转发过小的好帧 </span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#ac8009b7efd8fba92b8bfc4d5b3f94638">ETH_SecondFrameOperate</a> = <a class="code" href="group___e_t_h___second___frame___operate.html#ga35fb07ae8970a70148cfa4a13aafe0ae">ETH_SecondFrameOperate_Enable</a>;       <span class="comment">//打开处理第二帧功能</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a3ca8379eb2f94ad0463a9b1ad03b596e">ETH_AddressAlignedBeats</a> = <a class="code" href="group___e_t_h___address___aligned___beats.html#ga30001f3ebb97462818a23fe8cb0a48f8">ETH_AddressAlignedBeats_Enable</a>;     <span class="comment">//开启DMA传输的地址对齐功能</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a551324608d134557ccfaff826e7ff93d">ETH_FixedBurst</a> = <a class="code" href="group___e_t_h___fixed___burst.html#gaa4e41d22810db5b9f2aa65953ec90166">ETH_FixedBurst_Enable</a>;                       <span class="comment">//开启固定突发功能    </span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#ab672de0496d0d59b392c793fc7aa6e8f">ETH_RxDMABurstLength</a> = <a class="code" href="group___e_t_h___rx___d_m_a___burst___length.html#gad1e2397de66340ee6571d3128659d75f">ETH_RxDMABurstLength_32Beat</a>;           <span class="comment">//DMA发送的最大突发长度为32个节拍   </span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a00c72ba79a658a5f6a527d02213a0d69">ETH_TxDMABurstLength</a> = <a class="code" href="group___e_t_h___tx___d_m_a___burst___length.html#gaf1e41e3f7454e8ec674c2b0993922465">ETH_TxDMABurstLength_32Beat</a>;           <span class="comment">//DMA接收的最大突发长度为32个节拍</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#ac32a4655fef9300d8038f5fb1ec5e0a1">ETH_DMAArbitration</a> = <a class="code" href="group___e_t_h___d_m_a___arbitration.html#gaffd4401c8d937447e8d6166aa51ddcad">ETH_DMAArbitration_RoundRobin_RxTx_2_1</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    ETH_InitStructure.<a class="code" href="struct_e_t_h___init_type_def.html#a2bd7f06291425c6f3e294eb9e5052298">Sys_Clock_Freq</a>=168;<span class="comment">//系统时钟频率为192Mhz</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    rval=<a class="code" href="group___e_t_h___private___functions.html#ga17a011c3d06ec34e248310142d888d89">ETH_Init</a>(&amp;ETH_InitStructure,<a class="code" href="lan8720_8h.html#aa7545f9f15ad58b8f496376b713faee9">LAN8720_PHY_ADDRESS</a>);<span class="comment">//配置ETH</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span>(rval==<a class="code" href="group___e_t_h___exported___constants.html#ga2fb2e6248630a20832d42340e122c81c">ETH_SUCCESS</a>)<span class="comment">//配置成功</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="group___e_t_h___private___functions.html#gab4c3fe4587148958503b55f7f6d46cae">ETH_DMAITConfig</a>(<a class="code" href="group___e_t_h___d_m_a___interrupts.html#ga2718ee2b32543a6617deec57c773ec02">ETH_DMA_IT_NIS</a>|<a class="code" href="group___e_t_h___d_m_a___interrupts.html#ga1e28b6a79dc99f02b06d669a7b593b5b">ETH_DMA_IT_R</a>,ENABLE);<span class="comment">//使能以太网接收中断    </span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> rval;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div><div class="ttc" id="group___e_t_h___retry___transmission_html_ga8cfe8aa3869178938174e6b069ad3cc8"><div class="ttname"><a href="group___e_t_h___retry___transmission.html#ga8cfe8aa3869178938174e6b069ad3cc8">ETH_RetryTransmission_Disable</a></div><div class="ttdeci">#define ETH_RetryTransmission_Disable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00755">stm32f4x7_eth.h:755</a></div></div>
<div class="ttc" id="group___e_t_h___address___aligned___beats_html_ga30001f3ebb97462818a23fe8cb0a48f8"><div class="ttname"><a href="group___e_t_h___address___aligned___beats.html#ga30001f3ebb97462818a23fe8cb0a48f8">ETH_AddressAlignedBeats_Enable</a></div><div class="ttdeci">#define ETH_AddressAlignedBeats_Enable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01318">stm32f4x7_eth.h:1318</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a8d5b5a12df4848fc44b609f47085d159"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a8d5b5a12df4848fc44b609f47085d159">ETH_InitTypeDef::ETH_BroadcastFramesReception</a></div><div class="ttdeci">uint32_t ETH_BroadcastFramesReception</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00146">stm32f4x7_eth.h:146</a></div></div>
<div class="ttc" id="group___e_t_h___private___functions_html_ga92fe59489331817a185f80d4ffdebc6a"><div class="ttname"><a href="group___e_t_h___private___functions.html#ga92fe59489331817a185f80d4ffdebc6a">ETH_GetSoftwareResetStatus</a></div><div class="ttdeci">FlagStatus ETH_GetSoftwareResetStatus(void)</div><div class="ttdoc">Checks whether the ETHERNET software reset bit is set or not. </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8c_source.html#l01720">stm32f4x7_eth.c:1720</a></div></div>
<div class="ttc" id="group___e_t_h___multicast___frames___filter_html_ga6dcd4bb57280ce41f4f6bf3b673e85a4"><div class="ttname"><a href="group___e_t_h___multicast___frames___filter.html#ga6dcd4bb57280ce41f4f6bf3b673e85a4">ETH_MulticastFramesFilter_Perfect</a></div><div class="ttdeci">#define ETH_MulticastFramesFilter_Perfect</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00884">stm32f4x7_eth.h:884</a></div></div>
<div class="ttc" id="group___e_t_h___d_m_a___interrupts_html_ga1e28b6a79dc99f02b06d669a7b593b5b"><div class="ttname"><a href="group___e_t_h___d_m_a___interrupts.html#ga1e28b6a79dc99f02b06d669a7b593b5b">ETH_DMA_IT_R</a></div><div class="ttdeci">#define ETH_DMA_IT_R</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01481">stm32f4x7_eth.h:1481</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a563325f01689a6e36ba4daeec6ee9b02"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a563325f01689a6e36ba4daeec6ee9b02">ETH_InitTypeDef::ETH_AutoNegotiation</a></div><div class="ttdeci">uint32_t ETH_AutoNegotiation</div><div class="ttdoc">/ * MAC </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00086">stm32f4x7_eth.h:86</a></div></div>
<div class="ttc" id="group___e_t_h___private___functions_html_gac5b991b83a1a26f4d3fdfcb44a9e2961"><div class="ttname"><a href="group___e_t_h___private___functions.html#gac5b991b83a1a26f4d3fdfcb44a9e2961">ETH_SoftwareReset</a></div><div class="ttdeci">void ETH_SoftwareReset(void)</div><div class="ttdoc">Resets all MAC subsystem internal registers and logic. </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8c_source.html#l01708">stm32f4x7_eth.c:1708</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a757fced05a76ee31233fce12aee6c4a6"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a757fced05a76ee31233fce12aee6c4a6">ETH_InitTypeDef::ETH_ChecksumOffload</a></div><div class="ttdeci">uint32_t ETH_ChecksumOffload</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00121">stm32f4x7_eth.h:121</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a2bd7f06291425c6f3e294eb9e5052298"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a2bd7f06291425c6f3e294eb9e5052298">ETH_InitTypeDef::Sys_Clock_Freq</a></div><div class="ttdeci">uint32_t Sys_Clock_Freq</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00242">stm32f4x7_eth.h:242</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a08f07205d16cbe7a35ee066e3a5c55e7"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a08f07205d16cbe7a35ee066e3a5c55e7">ETH_InitTypeDef::ETH_PromiscuousMode</a></div><div class="ttdeci">uint32_t ETH_PromiscuousMode</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00152">stm32f4x7_eth.h:152</a></div></div>
<div class="ttc" id="group___e_t_h___receive___all_html_gac6b5bd518b78adc926a982630b6002e6"><div class="ttname"><a href="group___e_t_h___receive___all.html#gac6b5bd518b78adc926a982630b6002e6">ETH_ReceiveAll_Disable</a></div><div class="ttdeci">#define ETH_ReceiveAll_Disable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00807">stm32f4x7_eth.h:807</a></div></div>
<div class="ttc" id="group___e_t_h___private___functions_html_ga17a011c3d06ec34e248310142d888d89"><div class="ttname"><a href="group___e_t_h___private___functions.html#ga17a011c3d06ec34e248310142d888d89">ETH_Init</a></div><div class="ttdeci">uint32_t ETH_Init(ETH_InitTypeDef *ETH_InitStruct, uint16_t PHYAddress)</div><div class="ttdoc">Initializes the ETHERNET peripheral according to the specified parameters in the ETH_InitStruct ...</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8c_source.html#l00252">stm32f4x7_eth.c:252</a></div></div>
<div class="ttc" id="group___e_t_h___auto_negotiation_html_ga8dfcaadec110d690ff16d23b02a6dbcf"><div class="ttname"><a href="group___e_t_h___auto_negotiation.html#ga8dfcaadec110d690ff16d23b02a6dbcf">ETH_AutoNegotiation_Enable</a></div><div class="ttdeci">#define ETH_AutoNegotiation_Enable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00622">stm32f4x7_eth.h:622</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a5459fcb434ee80976302b4e394c6548e"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a5459fcb434ee80976302b4e394c6548e">ETH_InitTypeDef::ETH_TransmitStoreForward</a></div><div class="ttdeci">uint32_t ETH_TransmitStoreForward</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00206">stm32f4x7_eth.h:206</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a09bd5f8a057289f179b0398cc7306c89"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a09bd5f8a057289f179b0398cc7306c89">ETH_InitTypeDef::ETH_UnicastFramesFilter</a></div><div class="ttdeci">uint32_t ETH_UnicastFramesFilter</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00158">stm32f4x7_eth.h:158</a></div></div>
<div class="ttc" id="group___e_t_h___tx___d_m_a___burst___length_html_gaf1e41e3f7454e8ec674c2b0993922465"><div class="ttname"><a href="group___e_t_h___tx___d_m_a___burst___length.html#gaf1e41e3f7454e8ec674c2b0993922465">ETH_TxDMABurstLength_32Beat</a></div><div class="ttdeci">#define ETH_TxDMABurstLength_32Beat</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01380">stm32f4x7_eth.h:1380</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_ab672de0496d0d59b392c793fc7aa6e8f"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#ab672de0496d0d59b392c793fc7aa6e8f">ETH_InitTypeDef::ETH_RxDMABurstLength</a></div><div class="ttdeci">uint32_t ETH_RxDMABurstLength</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00232">stm32f4x7_eth.h:232</a></div></div>
<div class="ttc" id="group___e_t_h___loop___back___mode_html_ga10d7d136a17281b5cabe9f32b7105ea6"><div class="ttname"><a href="group___e_t_h___loop___back___mode.html#ga10d7d136a17281b5cabe9f32b7105ea6">ETH_LoopbackMode_Disable</a></div><div class="ttdeci">#define ETH_LoopbackMode_Disable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00719">stm32f4x7_eth.h:719</a></div></div>
<div class="ttc" id="group___e_t_h___fixed___burst_html_gaa4e41d22810db5b9f2aa65953ec90166"><div class="ttname"><a href="group___e_t_h___fixed___burst.html#gaa4e41d22810db5b9f2aa65953ec90166">ETH_FixedBurst_Enable</a></div><div class="ttdeci">#define ETH_FixedBurst_Enable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01330">stm32f4x7_eth.h:1330</a></div></div>
<div class="ttc" id="group___e_t_h___exported___constants_html_ga2fb2e6248630a20832d42340e122c81c"><div class="ttname"><a href="group___e_t_h___exported___constants.html#ga2fb2e6248630a20832d42340e122c81c">ETH_SUCCESS</a></div><div class="ttdeci">#define ETH_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01773">stm32f4x7_eth.h:1773</a></div></div>
<div class="ttc" id="lan8720_8h_html_aa7545f9f15ad58b8f496376b713faee9"><div class="ttname"><a href="lan8720_8h.html#aa7545f9f15ad58b8f496376b713faee9">LAN8720_PHY_ADDRESS</a></div><div class="ttdeci">#define LAN8720_PHY_ADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="lan8720_8h_source.html#l00025">lan8720.h:25</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_abd14492b2b914503b4fa75cff478af42"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#abd14492b2b914503b4fa75cff478af42">ETH_InitTypeDef::ETH_AutomaticPadCRCStrip</a></div><div class="ttdeci">uint32_t ETH_AutomaticPadCRCStrip</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00128">stm32f4x7_eth.h:128</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_ac8009b7efd8fba92b8bfc4d5b3f94638"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#ac8009b7efd8fba92b8bfc4d5b3f94638">ETH_InitTypeDef::ETH_SecondFrameOperate</a></div><div class="ttdeci">uint32_t ETH_SecondFrameOperate</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00222">stm32f4x7_eth.h:222</a></div></div>
<div class="ttc" id="group___e_t_h___d_m_a___arbitration_html_gaffd4401c8d937447e8d6166aa51ddcad"><div class="ttname"><a href="group___e_t_h___d_m_a___arbitration.html#gaffd4401c8d937447e8d6166aa51ddcad">ETH_DMAArbitration_RoundRobin_RxTx_2_1</a></div><div class="ttdeci">#define ETH_DMAArbitration_RoundRobin_RxTx_2_1</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01413">stm32f4x7_eth.h:1413</a></div></div>
<div class="ttc" id="group___e_t_h___receive___store___forward_html_ga727f58780535be5c44028c33ea4af4a3"><div class="ttname"><a href="group___e_t_h___receive___store___forward.html#ga727f58780535be5c44028c33ea4af4a3">ETH_ReceiveStoreForward_Enable</a></div><div class="ttdeci">#define ETH_ReceiveStoreForward_Enable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01212">stm32f4x7_eth.h:1212</a></div></div>
<div class="ttc" id="group___e_t_h___d_m_a___interrupts_html_ga2718ee2b32543a6617deec57c773ec02"><div class="ttname"><a href="group___e_t_h___d_m_a___interrupts.html#ga2718ee2b32543a6617deec57c773ec02">ETH_DMA_IT_NIS</a></div><div class="ttdeci">#define ETH_DMA_IT_NIS</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01473">stm32f4x7_eth.h:1473</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a02c9dad3f1d0c40b684613dd6616f5ee"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a02c9dad3f1d0c40b684613dd6616f5ee">ETH_InitTypeDef::ETH_ReceiveStoreForward</a></div><div class="ttdeci">uint32_t ETH_ReceiveStoreForward</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00200">stm32f4x7_eth.h:200</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a0b137cf6aad74ac5a7f5bda3a5729b59"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a0b137cf6aad74ac5a7f5bda3a5729b59">ETH_InitTypeDef::ETH_MulticastFramesFilter</a></div><div class="ttdeci">uint32_t ETH_MulticastFramesFilter</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00155">stm32f4x7_eth.h:155</a></div></div>
<div class="ttc" id="group___e_t_h___second___frame___operate_html_ga35fb07ae8970a70148cfa4a13aafe0ae"><div class="ttname"><a href="group___e_t_h___second___frame___operate.html#ga35fb07ae8970a70148cfa4a13aafe0ae">ETH_SecondFrameOperate_Enable</a></div><div class="ttdeci">#define ETH_SecondFrameOperate_Enable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01306">stm32f4x7_eth.h:1306</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a9c2ab5db2ec930aae94b037822243c2b"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a9c2ab5db2ec930aae94b037822243c2b">ETH_InitTypeDef::ETH_DropTCPIPChecksumErrorFrame</a></div><div class="ttdeci">uint32_t ETH_DropTCPIPChecksumErrorFrame</div><div class="ttdoc">/ * DMA </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00197">stm32f4x7_eth.h:197</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a09f4642d4bc64b05e1d306413962cad2"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a09f4642d4bc64b05e1d306413962cad2">ETH_InitTypeDef::ETH_ForwardErrorFrames</a></div><div class="ttdeci">uint32_t ETH_ForwardErrorFrames</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00212">stm32f4x7_eth.h:212</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_afdd4de2974d6af1f7056ba560ad3e52d"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#afdd4de2974d6af1f7056ba560ad3e52d">ETH_InitTypeDef::ETH_ReceiveAll</a></div><div class="ttdeci">uint32_t ETH_ReceiveAll</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00137">stm32f4x7_eth.h:137</a></div></div>
<div class="ttc" id="group___e_t_h___unicast___frames___filter_html_ga5d3d063e0b68e9870356369336c406b0"><div class="ttname"><a href="group___e_t_h___unicast___frames___filter.html#ga5d3d063e0b68e9870356369336c406b0">ETH_UnicastFramesFilter_Perfect</a></div><div class="ttdeci">#define ETH_UnicastFramesFilter_Perfect</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00901">stm32f4x7_eth.h:901</a></div></div>
<div class="ttc" id="group___e_t_h___private___functions_html_ga0d96b5b1d88725ebdac89e28b786ec84"><div class="ttname"><a href="group___e_t_h___private___functions.html#ga0d96b5b1d88725ebdac89e28b786ec84">ETH_DeInit</a></div><div class="ttdeci">void ETH_DeInit(void)</div><div class="ttdoc">Deinitializes the ETHERNET peripheral registers to their default reset values. </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8c_source.html#l00133">stm32f4x7_eth.c:133</a></div></div>
<div class="ttc" id="group___e_t_h___private___functions_html_gab4c3fe4587148958503b55f7f6d46cae"><div class="ttname"><a href="group___e_t_h___private___functions.html#gab4c3fe4587148958503b55f7f6d46cae">ETH_DMAITConfig</a></div><div class="ttdeci">void ETH_DMAITConfig(uint32_t ETH_DMA_IT, FunctionalState NewState)</div><div class="ttdoc">Enables or disables the specified ETHERNET DMA interrupts. </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8c_source.html#l01831">stm32f4x7_eth.c:1831</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a551324608d134557ccfaff826e7ff93d"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a551324608d134557ccfaff826e7ff93d">ETH_InitTypeDef::ETH_FixedBurst</a></div><div class="ttdeci">uint32_t ETH_FixedBurst</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00229">stm32f4x7_eth.h:229</a></div></div>
<div class="ttc" id="group___e_t_h___forward___undersized___good___frames_html_ga4bafcb985b29483df8cd90fe6b495aab"><div class="ttname"><a href="group___e_t_h___forward___undersized___good___frames.html#ga4bafcb985b29483df8cd90fe6b495aab">ETH_ForwardUndersizedGoodFrames_Disable</a></div><div class="ttdeci">#define ETH_ForwardUndersizedGoodFrames_Disable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01280">stm32f4x7_eth.h:1280</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a1a5596b902d3915a033b3a6d78b2a839"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a1a5596b902d3915a033b3a6d78b2a839">ETH_InitTypeDef::ETH_ForwardUndersizedGoodFrames</a></div><div class="ttdeci">uint32_t ETH_ForwardUndersizedGoodFrames</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00215">stm32f4x7_eth.h:215</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a34575b892af284b8a40baa34bdcc88b7"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a34575b892af284b8a40baa34bdcc88b7">ETH_InitTypeDef::ETH_LoopbackMode</a></div><div class="ttdeci">uint32_t ETH_LoopbackMode</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00115">stm32f4x7_eth.h:115</a></div></div>
<div class="ttc" id="group___e_t_h___transmit___store___forward_html_gac4e039b50eb9413c0fc3f5159ee730cf"><div class="ttname"><a href="group___e_t_h___transmit___store___forward.html#gac4e039b50eb9413c0fc3f5159ee730cf">ETH_TransmitStoreForward_Enable</a></div><div class="ttdeci">#define ETH_TransmitStoreForward_Enable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01234">stm32f4x7_eth.h:1234</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_ac32a4655fef9300d8038f5fb1ec5e0a1"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#ac32a4655fef9300d8038f5fb1ec5e0a1">ETH_InitTypeDef::ETH_DMAArbitration</a></div><div class="ttdeci">uint32_t ETH_DMAArbitration</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00240">stm32f4x7_eth.h:240</a></div></div>
<div class="ttc" id="group___e_t_h___checksum___offload_html_ga8ccef3ab0b689125c440288722fb515b"><div class="ttname"><a href="group___e_t_h___checksum___offload.html#ga8ccef3ab0b689125c440288722fb515b">ETH_ChecksumOffload_Enable</a></div><div class="ttdeci">#define ETH_ChecksumOffload_Enable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00742">stm32f4x7_eth.h:742</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a3ca8379eb2f94ad0463a9b1ad03b596e"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a3ca8379eb2f94ad0463a9b1ad03b596e">ETH_InitTypeDef::ETH_AddressAlignedBeats</a></div><div class="ttdeci">uint32_t ETH_AddressAlignedBeats</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00226">stm32f4x7_eth.h:226</a></div></div>
<div class="ttc" id="group___e_t_h___drop___t_c_p___i_p___checksum___error___frame_html_gae21d399e629407049e96d6bee5e04371"><div class="ttname"><a href="group___e_t_h___drop___t_c_p___i_p___checksum___error___frame.html#gae21d399e629407049e96d6bee5e04371">ETH_DropTCPIPChecksumErrorFrame_Enable</a></div><div class="ttdeci">#define ETH_DropTCPIPChecksumErrorFrame_Enable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01201">stm32f4x7_eth.h:1201</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a8c4bbe2cf7d3487e836eeaec6d5ef8f8"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a8c4bbe2cf7d3487e836eeaec6d5ef8f8">ETH_InitTypeDef::ETH_RetryTransmission</a></div><div class="ttdeci">uint32_t ETH_RetryTransmission</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00124">stm32f4x7_eth.h:124</a></div></div>
<div class="ttc" id="group___e_t_h___private___functions_html_ga53f3d018eab9974662e4bfd00671e900"><div class="ttname"><a href="group___e_t_h___private___functions.html#ga53f3d018eab9974662e4bfd00671e900">ETH_StructInit</a></div><div class="ttdeci">void ETH_StructInit(ETH_InitTypeDef *ETH_InitStruct)</div><div class="ttdoc">Fills each ETH_InitStruct member with its default value. </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8c_source.html#l00145">stm32f4x7_eth.c:145</a></div></div>
<div class="ttc" id="group___e_t_h___forward___error___frames_html_ga2c2d4ee2e78cd6c53679edc087fa6bee"><div class="ttname"><a href="group___e_t_h___forward___error___frames.html#ga2c2d4ee2e78cd6c53679edc087fa6bee">ETH_ForwardErrorFrames_Disable</a></div><div class="ttdeci">#define ETH_ForwardErrorFrames_Disable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01269">stm32f4x7_eth.h:1269</a></div></div>
<div class="ttc" id="group___e_t_h___broadcast___frames___reception_html_ga423a3eb93f12af197e50725770aa1bf2"><div class="ttname"><a href="group___e_t_h___broadcast___frames___reception.html#ga423a3eb93f12af197e50725770aa1bf2">ETH_BroadcastFramesReception_Enable</a></div><div class="ttdeci">#define ETH_BroadcastFramesReception_Enable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00846">stm32f4x7_eth.h:846</a></div></div>
<div class="ttc" id="group___e_t_h___rx___d_m_a___burst___length_html_gad1e2397de66340ee6571d3128659d75f"><div class="ttname"><a href="group___e_t_h___rx___d_m_a___burst___length.html#gad1e2397de66340ee6571d3128659d75f">ETH_RxDMABurstLength_32Beat</a></div><div class="ttdeci">#define ETH_RxDMABurstLength_32Beat</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01347">stm32f4x7_eth.h:1347</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html"><div class="ttname"><a href="struct_e_t_h___init_type_def.html">ETH_InitTypeDef</a></div><div class="ttdoc">ETH MAC Init structure definition </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00082">stm32f4x7_eth.h:82</a></div></div>
<div class="ttc" id="group___e_t_h___automatic___pad___c_r_c___strip_html_gade619eb408c23e8ed12bc9144db5a140"><div class="ttname"><a href="group___e_t_h___automatic___pad___c_r_c___strip.html#gade619eb408c23e8ed12bc9144db5a140">ETH_AutomaticPadCRCStrip_Disable</a></div><div class="ttdeci">#define ETH_AutomaticPadCRCStrip_Disable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00767">stm32f4x7_eth.h:767</a></div></div>
<div class="ttc" id="struct_e_t_h___init_type_def_html_a00c72ba79a658a5f6a527d02213a0d69"><div class="ttname"><a href="struct_e_t_h___init_type_def.html#a00c72ba79a658a5f6a527d02213a0d69">ETH_InitTypeDef::ETH_TxDMABurstLength</a></div><div class="ttdeci">uint32_t ETH_TxDMABurstLength</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00235">stm32f4x7_eth.h:235</a></div></div>
<div class="ttc" id="group___e_t_h___promiscuous___mode_html_ga18e9c873cdbb7a44b954df49ce9b760b"><div class="ttname"><a href="group___e_t_h___promiscuous___mode.html#ga18e9c873cdbb7a44b954df49ce9b760b">ETH_PromiscuousMode_Disable</a></div><div class="ttdeci">#define ETH_PromiscuousMode_Disable</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00871">stm32f4x7_eth.h:871</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3fb4dfb03c6b1a79b74d02fbab723156"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fb4dfb03c6b1a79b74d02fbab723156">&#9670;&nbsp;</a></span>ETH_Mem_Free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ETH_Mem_Free </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="lan8720_8c_source.html">lan8720.c</a> 第 <a class="el" href="lan8720_8c_source.html#l00261">261</a> 行定义.</p>

<p class="reference">参考 <a class="el" href="lan8720_8c_source.html#l00028">Rx_Buff</a> , 以及 <a class="el" href="lan8720_8c_source.html#l00029">Tx_Buff</a>.</p>

<p class="reference">参考自 <a class="el" href="lan8720_8c_source.html#l00247">ETH_Mem_Malloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;{ </div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    myfree(SRAMIN,<a class="code" href="lan8720_8c.html#a9f40ac048abe15c5a78317dc8cbec4f0">DMARxDscrTab</a>);<span class="comment">//释放内存</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    myfree(SRAMIN,<a class="code" href="lan8720_8c.html#a920a8f0f87c36e36706f6451f6b90152">DMATxDscrTab</a>);<span class="comment">//释放内存</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    myfree(SRAMIN,<a class="code" href="lan8720_8c.html#af34dce86974420c070b2354fbd7e045e">Rx_Buff</a>);     <span class="comment">//释放内存</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    myfree(SRAMIN,<a class="code" href="lan8720_8c.html#ad8719ffa27fb73862d0f77656bfd92d5">Tx_Buff</a>);     <span class="comment">//释放内存  </span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;}</div><div class="ttc" id="lan8720_8c_html_a9f40ac048abe15c5a78317dc8cbec4f0"><div class="ttname"><a href="lan8720_8c.html#a9f40ac048abe15c5a78317dc8cbec4f0">DMARxDscrTab</a></div><div class="ttdeci">ETH_DMADESCTypeDef * DMARxDscrTab</div><div class="ttdef"><b>Definition:</b> <a href="lan8720_8c_source.html#l00026">lan8720.c:26</a></div></div>
<div class="ttc" id="lan8720_8c_html_ad8719ffa27fb73862d0f77656bfd92d5"><div class="ttname"><a href="lan8720_8c.html#ad8719ffa27fb73862d0f77656bfd92d5">Tx_Buff</a></div><div class="ttdeci">uint8_t * Tx_Buff</div><div class="ttdef"><b>Definition:</b> <a href="lan8720_8c_source.html#l00029">lan8720.c:29</a></div></div>
<div class="ttc" id="lan8720_8c_html_a920a8f0f87c36e36706f6451f6b90152"><div class="ttname"><a href="lan8720_8c.html#a920a8f0f87c36e36706f6451f6b90152">DMATxDscrTab</a></div><div class="ttdeci">ETH_DMADESCTypeDef * DMATxDscrTab</div><div class="ttdef"><b>Definition:</b> <a href="lan8720_8c_source.html#l00027">lan8720.c:27</a></div></div>
<div class="ttc" id="lan8720_8c_html_af34dce86974420c070b2354fbd7e045e"><div class="ttname"><a href="lan8720_8c.html#af34dce86974420c070b2354fbd7e045e">Rx_Buff</a></div><div class="ttdeci">uint8_t * Rx_Buff</div><div class="ttdef"><b>Definition:</b> <a href="lan8720_8c_source.html#l00028">lan8720.c:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a166a3c12339d64b6545d091c13121a4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a166a3c12339d64b6545d091c13121a4b">&#9670;&nbsp;</a></span>ETH_Mem_Malloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 ETH_Mem_Malloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="lan8720_8c_source.html">lan8720.c</a> 第 <a class="el" href="lan8720_8c_source.html#l00247">247</a> 行定义.</p>

<p class="reference">参考 <a class="el" href="lan8720_8c_source.html#l00261">ETH_Mem_Free()</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00327">ETH_RX_BUF_SIZE</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00332">ETH_RXBUFNB</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00354">ETH_TX_BUF_SIZE</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00359">ETH_TXBUFNB</a>, <a class="el" href="lan8720_8c_source.html#l00028">Rx_Buff</a> , 以及 <a class="el" href="lan8720_8c_source.html#l00029">Tx_Buff</a>.</p>
<div class="fragment"><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{ </div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="lan8720_8c.html#a9f40ac048abe15c5a78317dc8cbec4f0">DMARxDscrTab</a>=mymalloc(SRAMIN,<a class="code" href="group___e_n_e_t___buffers__setting.html#ga62b0f224fa9c4f2e5574c9e52526f751">ETH_RXBUFNB</a>*<span class="keyword">sizeof</span>(<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a>));<span class="comment">//申请内存</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="lan8720_8c.html#a920a8f0f87c36e36706f6451f6b90152">DMATxDscrTab</a>=mymalloc(SRAMIN,<a class="code" href="group___e_n_e_t___buffers__setting.html#ga4ad07ad8fa6f8639ab8ef362390d86c7">ETH_TXBUFNB</a>*<span class="keyword">sizeof</span>(<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a>));<span class="comment">//申请内存  </span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="lan8720_8c.html#af34dce86974420c070b2354fbd7e045e">Rx_Buff</a>=mymalloc(SRAMIN,<a class="code" href="group___e_n_e_t___buffers__setting.html#ga0cdaf687f7a7f2dba570d5a722990786">ETH_RX_BUF_SIZE</a>*<a class="code" href="group___e_n_e_t___buffers__setting.html#ga62b0f224fa9c4f2e5574c9e52526f751">ETH_RXBUFNB</a>);   <span class="comment">//申请内存</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="lan8720_8c.html#ad8719ffa27fb73862d0f77656bfd92d5">Tx_Buff</a>=mymalloc(SRAMIN,<a class="code" href="group___e_n_e_t___buffers__setting.html#gaf83956dfc1b135c3c92ac409758b6cf4">ETH_TX_BUF_SIZE</a>*<a class="code" href="group___e_n_e_t___buffers__setting.html#ga4ad07ad8fa6f8639ab8ef362390d86c7">ETH_TXBUFNB</a>);   <span class="comment">//申请内存</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="lan8720_8c.html#a9f40ac048abe15c5a78317dc8cbec4f0">DMARxDscrTab</a>||!<a class="code" href="lan8720_8c.html#a920a8f0f87c36e36706f6451f6b90152">DMATxDscrTab</a>||!<a class="code" href="lan8720_8c.html#af34dce86974420c070b2354fbd7e045e">Rx_Buff</a>||!<a class="code" href="lan8720_8c.html#ad8719ffa27fb73862d0f77656bfd92d5">Tx_Buff</a>)</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="lan8720_8c.html#a3fb4dfb03c6b1a79b74d02fbab723156">ETH_Mem_Free</a>();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">return</span> 1;   <span class="comment">//申请失败</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }   </div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">return</span> 0;       <span class="comment">//申请成功</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div><div class="ttc" id="lan8720_8c_html_a9f40ac048abe15c5a78317dc8cbec4f0"><div class="ttname"><a href="lan8720_8c.html#a9f40ac048abe15c5a78317dc8cbec4f0">DMARxDscrTab</a></div><div class="ttdeci">ETH_DMADESCTypeDef * DMARxDscrTab</div><div class="ttdef"><b>Definition:</b> <a href="lan8720_8c_source.html#l00026">lan8720.c:26</a></div></div>
<div class="ttc" id="group___e_n_e_t___buffers__setting_html_gaf83956dfc1b135c3c92ac409758b6cf4"><div class="ttname"><a href="group___e_n_e_t___buffers__setting.html#gaf83956dfc1b135c3c92ac409758b6cf4">ETH_TX_BUF_SIZE</a></div><div class="ttdeci">#define ETH_TX_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00354">stm32f4x7_eth.h:354</a></div></div>
<div class="ttc" id="lan8720_8c_html_a3fb4dfb03c6b1a79b74d02fbab723156"><div class="ttname"><a href="lan8720_8c.html#a3fb4dfb03c6b1a79b74d02fbab723156">ETH_Mem_Free</a></div><div class="ttdeci">void ETH_Mem_Free(void)</div><div class="ttdef"><b>Definition:</b> <a href="lan8720_8c_source.html#l00261">lan8720.c:261</a></div></div>
<div class="ttc" id="group___e_n_e_t___buffers__setting_html_ga62b0f224fa9c4f2e5574c9e52526f751"><div class="ttname"><a href="group___e_n_e_t___buffers__setting.html#ga62b0f224fa9c4f2e5574c9e52526f751">ETH_RXBUFNB</a></div><div class="ttdeci">#define ETH_RXBUFNB</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00332">stm32f4x7_eth.h:332</a></div></div>
<div class="ttc" id="struct_e_t_h___d_m_a_d_e_s_c_type_def_html"><div class="ttname"><a href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a></div><div class="ttdoc">DMA descriptors types </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00254">stm32f4x7_eth.h:254</a></div></div>
<div class="ttc" id="group___e_n_e_t___buffers__setting_html_ga4ad07ad8fa6f8639ab8ef362390d86c7"><div class="ttname"><a href="group___e_n_e_t___buffers__setting.html#ga4ad07ad8fa6f8639ab8ef362390d86c7">ETH_TXBUFNB</a></div><div class="ttdeci">#define ETH_TXBUFNB</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00359">stm32f4x7_eth.h:359</a></div></div>
<div class="ttc" id="lan8720_8c_html_ad8719ffa27fb73862d0f77656bfd92d5"><div class="ttname"><a href="lan8720_8c.html#ad8719ffa27fb73862d0f77656bfd92d5">Tx_Buff</a></div><div class="ttdeci">uint8_t * Tx_Buff</div><div class="ttdef"><b>Definition:</b> <a href="lan8720_8c_source.html#l00029">lan8720.c:29</a></div></div>
<div class="ttc" id="group___e_n_e_t___buffers__setting_html_ga0cdaf687f7a7f2dba570d5a722990786"><div class="ttname"><a href="group___e_n_e_t___buffers__setting.html#ga0cdaf687f7a7f2dba570d5a722990786">ETH_RX_BUF_SIZE</a></div><div class="ttdeci">#define ETH_RX_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00327">stm32f4x7_eth.h:327</a></div></div>
<div class="ttc" id="lan8720_8c_html_a920a8f0f87c36e36706f6451f6b90152"><div class="ttname"><a href="lan8720_8c.html#a920a8f0f87c36e36706f6451f6b90152">DMATxDscrTab</a></div><div class="ttdeci">ETH_DMADESCTypeDef * DMATxDscrTab</div><div class="ttdef"><b>Definition:</b> <a href="lan8720_8c_source.html#l00027">lan8720.c:27</a></div></div>
<div class="ttc" id="lan8720_8c_html_af34dce86974420c070b2354fbd7e045e"><div class="ttname"><a href="lan8720_8c.html#af34dce86974420c070b2354fbd7e045e">Rx_Buff</a></div><div class="ttdeci">uint8_t * Rx_Buff</div><div class="ttdef"><b>Definition:</b> <a href="lan8720_8c_source.html#l00028">lan8720.c:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac041d42a8f9e10741dc23956ff3076ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac041d42a8f9e10741dc23956ff3076ac">&#9670;&nbsp;</a></span>ETH_Rx_Packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_frame_type_def.html">FrameTypeDef</a> ETH_Rx_Packet </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="lan8720_8c_source.html">lan8720.c</a> 第 <a class="el" href="lan8720_8c_source.html#l00188">188</a> 行定义.</p>

<p class="reference">参考 <a class="el" href="stm32f4x7__eth_8h_source.html#l00271">FrameTypeDef::buffer</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00257">ETH_DMADESCTypeDef::Buffer1Addr</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00258">ETH_DMADESCTypeDef::Buffer2NextDescAddr</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00272">FrameTypeDef::descriptor</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l00082">DMARxDescToGet</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00476">ETH_DMARxDesc_ES</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00475">ETH_DMARxDesc_FL</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00362">ETH_DMARxDesc_FrameLengthShift</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00482">ETH_DMARxDesc_FS</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00483">ETH_DMARxDesc_LS</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00473">ETH_DMARxDesc_OWN</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01772">ETH_ERROR</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00270">FrameTypeDef::length</a> , 以及 <a class="el" href="stm32f4x7__eth_8h_source.html#l00255">ETH_DMADESCTypeDef::Status</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{ </div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    u32 framelength=0;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="struct_frame_type_def.html">FrameTypeDef</a> frame={0,0};   </div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">//检查当前描述符,是否属于ETHERNET DMA(设置的时候)/CPU(复位的时候)</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span>((<a class="code" href="lan8720_8h.html#a11dd23e5e921c7799fe4083d2ab77df4">DMARxDescToGet</a>-&gt;<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#aff9b5433372a58eec853246b7888d298">Status</a>&amp;<a class="code" href="group___d_m_a___rx__descriptor.html#ga386524dd7fe51d173cc9c189ca65dcf3">ETH_DMARxDesc_OWN</a>)!=(u32)RESET)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    {   </div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        frame.<a class="code" href="struct_frame_type_def.html#a39aedcefda43457f89453143486c1e63">length</a>=<a class="code" href="group___e_t_h___exported___constants.html#ga86fb9fb94bfcabd7360fc2307131f853">ETH_ERROR</a>; </div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">if</span> ((ETH-&gt;DMASR&amp;ETH_DMASR_RBUS)!=(u32)RESET)  </div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        { </div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            ETH-&gt;DMASR = ETH_DMASR_RBUS;<span class="comment">//清除ETH DMA的RBUS位 </span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            ETH-&gt;DMARPDR=0;<span class="comment">//恢复DMA接收</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">return</span> frame;<span class="comment">//错误,OWN位被设置了</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }  </div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span>(((<a class="code" href="lan8720_8h.html#a11dd23e5e921c7799fe4083d2ab77df4">DMARxDescToGet</a>-&gt;<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#aff9b5433372a58eec853246b7888d298">Status</a>&amp;<a class="code" href="group___d_m_a___rx__descriptor.html#ga134b0993abe454b57606c7a5d58b068b">ETH_DMARxDesc_ES</a>)==(u32)RESET)&amp;&amp; </div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    ((<a class="code" href="lan8720_8h.html#a11dd23e5e921c7799fe4083d2ab77df4">DMARxDescToGet</a>-&gt;<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#aff9b5433372a58eec853246b7888d298">Status</a> &amp; <a class="code" href="group___d_m_a___rx__descriptor.html#gab1133d7a0d4dea0b5a7d5b7aca9b81c1">ETH_DMARxDesc_LS</a>)!=(u32)RESET)&amp;&amp;  </div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    ((<a class="code" href="lan8720_8h.html#a11dd23e5e921c7799fe4083d2ab77df4">DMARxDescToGet</a>-&gt;<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#aff9b5433372a58eec853246b7888d298">Status</a> &amp; <a class="code" href="group___d_m_a___rx__descriptor.html#ga6c9e1ef39786af8f1d1444f65f2c452d">ETH_DMARxDesc_FS</a>)!=(u32)RESET))  </div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    {       </div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        framelength=((<a class="code" href="lan8720_8h.html#a11dd23e5e921c7799fe4083d2ab77df4">DMARxDescToGet</a>-&gt;<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#aff9b5433372a58eec853246b7888d298">Status</a>&amp;<a class="code" href="group___d_m_a___rx__descriptor.html#gaad540f38ba790e1f5d65ffcc0cfde239">ETH_DMARxDesc_FL</a>)&gt;&gt;<a class="code" href="group___e_n_e_t___buffers__setting.html#ga1d3274497e356d2b43d579a3f1ed93a7">ETH_DMARxDesc_FrameLengthShift</a>)-4;<span class="comment">//得到接收包帧长度(不包含4字节CRC)</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        frame.<a class="code" href="struct_frame_type_def.html#a5a42b11ad1ecf28ca2c70e7474783999">buffer</a> = <a class="code" href="lan8720_8h.html#a11dd23e5e921c7799fe4083d2ab77df4">DMARxDescToGet</a>-&gt;<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#a547988bebe5343111df7420184d22194">Buffer1Addr</a>;<span class="comment">//得到包数据所在的位置</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }<span class="keywordflow">else</span> framelength=<a class="code" href="group___e_t_h___exported___constants.html#ga86fb9fb94bfcabd7360fc2307131f853">ETH_ERROR</a>;<span class="comment">//错误  </span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    frame.<a class="code" href="struct_frame_type_def.html#a39aedcefda43457f89453143486c1e63">length</a>=framelength; </div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    frame.<a class="code" href="struct_frame_type_def.html#a309d25accb1bfcec91def03e5da1e3a1">descriptor</a>=<a class="code" href="lan8720_8h.html#a11dd23e5e921c7799fe4083d2ab77df4">DMARxDescToGet</a>;  </div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">//更新ETH DMA全局Rx描述符为下一个Rx描述符</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">//为下一次buffer读取设置下一个DMA Rx描述符</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="lan8720_8h.html#a11dd23e5e921c7799fe4083d2ab77df4">DMARxDescToGet</a>=(<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a>*)(<a class="code" href="lan8720_8h.html#a11dd23e5e921c7799fe4083d2ab77df4">DMARxDescToGet</a>-&gt;<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#a85548fffc8ac6a92e6a347b56bb3ebdb">Buffer2NextDescAddr</a>);   </div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> frame;  </div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div><div class="ttc" id="group___e_t_h___exported___constants_html_ga86fb9fb94bfcabd7360fc2307131f853"><div class="ttname"><a href="group___e_t_h___exported___constants.html#ga86fb9fb94bfcabd7360fc2307131f853">ETH_ERROR</a></div><div class="ttdeci">#define ETH_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01772">stm32f4x7_eth.h:1772</a></div></div>
<div class="ttc" id="group___d_m_a___rx__descriptor_html_ga6c9e1ef39786af8f1d1444f65f2c452d"><div class="ttname"><a href="group___d_m_a___rx__descriptor.html#ga6c9e1ef39786af8f1d1444f65f2c452d">ETH_DMARxDesc_FS</a></div><div class="ttdeci">#define ETH_DMARxDesc_FS</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00482">stm32f4x7_eth.h:482</a></div></div>
<div class="ttc" id="struct_frame_type_def_html_a5a42b11ad1ecf28ca2c70e7474783999"><div class="ttname"><a href="struct_frame_type_def.html#a5a42b11ad1ecf28ca2c70e7474783999">FrameTypeDef::buffer</a></div><div class="ttdeci">u32 buffer</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00271">stm32f4x7_eth.h:271</a></div></div>
<div class="ttc" id="group___d_m_a___rx__descriptor_html_ga134b0993abe454b57606c7a5d58b068b"><div class="ttname"><a href="group___d_m_a___rx__descriptor.html#ga134b0993abe454b57606c7a5d58b068b">ETH_DMARxDesc_ES</a></div><div class="ttdeci">#define ETH_DMARxDesc_ES</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00476">stm32f4x7_eth.h:476</a></div></div>
<div class="ttc" id="struct_e_t_h___d_m_a_d_e_s_c_type_def_html_a547988bebe5343111df7420184d22194"><div class="ttname"><a href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#a547988bebe5343111df7420184d22194">ETH_DMADESCTypeDef::Buffer1Addr</a></div><div class="ttdeci">uint32_t Buffer1Addr</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00257">stm32f4x7_eth.h:257</a></div></div>
<div class="ttc" id="struct_e_t_h___d_m_a_d_e_s_c_type_def_html"><div class="ttname"><a href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a></div><div class="ttdoc">DMA descriptors types </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00254">stm32f4x7_eth.h:254</a></div></div>
<div class="ttc" id="group___d_m_a___rx__descriptor_html_ga386524dd7fe51d173cc9c189ca65dcf3"><div class="ttname"><a href="group___d_m_a___rx__descriptor.html#ga386524dd7fe51d173cc9c189ca65dcf3">ETH_DMARxDesc_OWN</a></div><div class="ttdeci">#define ETH_DMARxDesc_OWN</div><div class="ttdoc">Bit definition of RDES0 register: DMA Rx descriptor status register </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00473">stm32f4x7_eth.h:473</a></div></div>
<div class="ttc" id="lan8720_8h_html_a11dd23e5e921c7799fe4083d2ab77df4"><div class="ttname"><a href="lan8720_8h.html#a11dd23e5e921c7799fe4083d2ab77df4">DMARxDescToGet</a></div><div class="ttdeci">ETH_DMADESCTypeDef * DMARxDescToGet</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8c_source.html#l00082">stm32f4x7_eth.c:82</a></div></div>
<div class="ttc" id="group___e_n_e_t___buffers__setting_html_ga1d3274497e356d2b43d579a3f1ed93a7"><div class="ttname"><a href="group___e_n_e_t___buffers__setting.html#ga1d3274497e356d2b43d579a3f1ed93a7">ETH_DMARxDesc_FrameLengthShift</a></div><div class="ttdeci">#define ETH_DMARxDesc_FrameLengthShift</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00362">stm32f4x7_eth.h:362</a></div></div>
<div class="ttc" id="struct_e_t_h___d_m_a_d_e_s_c_type_def_html_a85548fffc8ac6a92e6a347b56bb3ebdb"><div class="ttname"><a href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#a85548fffc8ac6a92e6a347b56bb3ebdb">ETH_DMADESCTypeDef::Buffer2NextDescAddr</a></div><div class="ttdeci">uint32_t Buffer2NextDescAddr</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00258">stm32f4x7_eth.h:258</a></div></div>
<div class="ttc" id="struct_e_t_h___d_m_a_d_e_s_c_type_def_html_aff9b5433372a58eec853246b7888d298"><div class="ttname"><a href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#aff9b5433372a58eec853246b7888d298">ETH_DMADESCTypeDef::Status</a></div><div class="ttdeci">__IO uint32_t Status</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00255">stm32f4x7_eth.h:255</a></div></div>
<div class="ttc" id="struct_frame_type_def_html_a309d25accb1bfcec91def03e5da1e3a1"><div class="ttname"><a href="struct_frame_type_def.html#a309d25accb1bfcec91def03e5da1e3a1">FrameTypeDef::descriptor</a></div><div class="ttdeci">__IO ETH_DMADESCTypeDef * descriptor</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00272">stm32f4x7_eth.h:272</a></div></div>
<div class="ttc" id="struct_frame_type_def_html_a39aedcefda43457f89453143486c1e63"><div class="ttname"><a href="struct_frame_type_def.html#a39aedcefda43457f89453143486c1e63">FrameTypeDef::length</a></div><div class="ttdeci">u32 length</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00270">stm32f4x7_eth.h:270</a></div></div>
<div class="ttc" id="struct_frame_type_def_html"><div class="ttname"><a href="struct_frame_type_def.html">FrameTypeDef</a></div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00269">stm32f4x7_eth.h:269</a></div></div>
<div class="ttc" id="group___d_m_a___rx__descriptor_html_gab1133d7a0d4dea0b5a7d5b7aca9b81c1"><div class="ttname"><a href="group___d_m_a___rx__descriptor.html#gab1133d7a0d4dea0b5a7d5b7aca9b81c1">ETH_DMARxDesc_LS</a></div><div class="ttdeci">#define ETH_DMARxDesc_LS</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00483">stm32f4x7_eth.h:483</a></div></div>
<div class="ttc" id="group___d_m_a___rx__descriptor_html_gaad540f38ba790e1f5d65ffcc0cfde239"><div class="ttname"><a href="group___d_m_a___rx__descriptor.html#gaad540f38ba790e1f5d65ffcc0cfde239">ETH_DMARxDesc_FL</a></div><div class="ttdeci">#define ETH_DMARxDesc_FL</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00475">stm32f4x7_eth.h:475</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a162a2a64d1e15382e7369ca2fd4e07e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a162a2a64d1e15382e7369ca2fd4e07e6">&#9670;&nbsp;</a></span>ETH_Tx_Packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 ETH_Tx_Packet </td>
          <td>(</td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>FrameLength</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="lan8720_8c_source.html">lan8720.c</a> 第 <a class="el" href="lan8720_8c_source.html#l00221">221</a> 行定义.</p>

<p class="reference">参考 <a class="el" href="stm32f4x7__eth_8h_source.html#l00258">ETH_DMADESCTypeDef::Buffer2NextDescAddr</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00256">ETH_DMADESCTypeDef::ControlBufferSize</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l00081">DMATxDescToSet</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00391">ETH_DMATxDesc_FS</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00390">ETH_DMATxDesc_LS</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00388">ETH_DMATxDesc_OWN</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l00422">ETH_DMATxDesc_TBS1</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01772">ETH_ERROR</a>, <a class="el" href="stm32f4x7__eth_8h_source.html#l01773">ETH_SUCCESS</a> , 以及 <a class="el" href="stm32f4x7__eth_8h_source.html#l00255">ETH_DMADESCTypeDef::Status</a>.</p>
<div class="fragment"><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;{   </div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">//检查当前描述符,是否属于ETHERNET DMA(设置的时候)/CPU(复位的时候)</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span>((<a class="code" href="lan8720_8h.html#ad976d6d263332c7033345f1802063bd5">DMATxDescToSet</a>-&gt;<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#aff9b5433372a58eec853246b7888d298">Status</a>&amp;<a class="code" href="group___e_n_e_t___buffers__setting.html#ga1f4eb4935db0342e4a1084d0e70ad581">ETH_DMATxDesc_OWN</a>)!=(u32)RESET)<span class="keywordflow">return</span> <a class="code" href="group___e_t_h___exported___constants.html#ga86fb9fb94bfcabd7360fc2307131f853">ETH_ERROR</a>;<span class="comment">//错误,OWN位被设置了 </span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="lan8720_8h.html#ad976d6d263332c7033345f1802063bd5">DMATxDescToSet</a>-&gt;<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#a22c9ee82e2904f4e3a21105fa6282cb3">ControlBufferSize</a>=(FrameLength&amp;<a class="code" href="group___e_n_e_t___buffers__setting.html#ga52f01b9b6a78cca89fde0803c4f7bf23">ETH_DMATxDesc_TBS1</a>);<span class="comment">//设置帧长度,bits[12:0]</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="lan8720_8h.html#ad976d6d263332c7033345f1802063bd5">DMATxDescToSet</a>-&gt;<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#aff9b5433372a58eec853246b7888d298">Status</a>|=<a class="code" href="group___e_n_e_t___buffers__setting.html#ga32a48885102339e3cac943ddcbcce581">ETH_DMATxDesc_LS</a>|<a class="code" href="group___e_n_e_t___buffers__setting.html#gaa9485798e19221ab1be0a41c4bc770a9">ETH_DMATxDesc_FS</a>;<span class="comment">//设置最后一个和第一个位段置位(1个描述符传输一帧)</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="lan8720_8h.html#ad976d6d263332c7033345f1802063bd5">DMATxDescToSet</a>-&gt;<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#aff9b5433372a58eec853246b7888d298">Status</a>|=<a class="code" href="group___e_n_e_t___buffers__setting.html#ga1f4eb4935db0342e4a1084d0e70ad581">ETH_DMATxDesc_OWN</a>;<span class="comment">//设置Tx描述符的OWN位,buffer重归ETH DMA</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">if</span>((ETH-&gt;DMASR&amp;ETH_DMASR_TBUS)!=(u32)RESET)<span class="comment">//当Tx Buffer不可用位(TBUS)被设置的时候,重置它.恢复传输</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    { </div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        ETH-&gt;DMASR=ETH_DMASR_TBUS;<span class="comment">//重置ETH DMA TBUS位 </span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        ETH-&gt;DMATPDR=0;<span class="comment">//恢复DMA发送</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    } </div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">//更新ETH DMA全局Tx描述符为下一个Tx描述符</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">//为下一次buffer发送设置下一个DMA Tx描述符 </span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="lan8720_8h.html#ad976d6d263332c7033345f1802063bd5">DMATxDescToSet</a>=(<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a>*)(<a class="code" href="lan8720_8h.html#ad976d6d263332c7033345f1802063bd5">DMATxDescToSet</a>-&gt;<a class="code" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#a85548fffc8ac6a92e6a347b56bb3ebdb">Buffer2NextDescAddr</a>);    </div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___e_t_h___exported___constants.html#ga2fb2e6248630a20832d42340e122c81c">ETH_SUCCESS</a>;   </div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div><div class="ttc" id="lan8720_8h_html_ad976d6d263332c7033345f1802063bd5"><div class="ttname"><a href="lan8720_8h.html#ad976d6d263332c7033345f1802063bd5">DMATxDescToSet</a></div><div class="ttdeci">ETH_DMADESCTypeDef * DMATxDescToSet</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8c_source.html#l00081">stm32f4x7_eth.c:81</a></div></div>
<div class="ttc" id="group___e_t_h___exported___constants_html_ga86fb9fb94bfcabd7360fc2307131f853"><div class="ttname"><a href="group___e_t_h___exported___constants.html#ga86fb9fb94bfcabd7360fc2307131f853">ETH_ERROR</a></div><div class="ttdeci">#define ETH_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01772">stm32f4x7_eth.h:1772</a></div></div>
<div class="ttc" id="group___e_n_e_t___buffers__setting_html_ga52f01b9b6a78cca89fde0803c4f7bf23"><div class="ttname"><a href="group___e_n_e_t___buffers__setting.html#ga52f01b9b6a78cca89fde0803c4f7bf23">ETH_DMATxDesc_TBS1</a></div><div class="ttdeci">#define ETH_DMATxDesc_TBS1</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00422">stm32f4x7_eth.h:422</a></div></div>
<div class="ttc" id="group___e_t_h___exported___constants_html_ga2fb2e6248630a20832d42340e122c81c"><div class="ttname"><a href="group___e_t_h___exported___constants.html#ga2fb2e6248630a20832d42340e122c81c">ETH_SUCCESS</a></div><div class="ttdeci">#define ETH_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l01773">stm32f4x7_eth.h:1773</a></div></div>
<div class="ttc" id="group___e_n_e_t___buffers__setting_html_gaa9485798e19221ab1be0a41c4bc770a9"><div class="ttname"><a href="group___e_n_e_t___buffers__setting.html#gaa9485798e19221ab1be0a41c4bc770a9">ETH_DMATxDesc_FS</a></div><div class="ttdeci">#define ETH_DMATxDesc_FS</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00391">stm32f4x7_eth.h:391</a></div></div>
<div class="ttc" id="struct_e_t_h___d_m_a_d_e_s_c_type_def_html"><div class="ttname"><a href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a></div><div class="ttdoc">DMA descriptors types </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00254">stm32f4x7_eth.h:254</a></div></div>
<div class="ttc" id="group___e_n_e_t___buffers__setting_html_ga1f4eb4935db0342e4a1084d0e70ad581"><div class="ttname"><a href="group___e_n_e_t___buffers__setting.html#ga1f4eb4935db0342e4a1084d0e70ad581">ETH_DMATxDesc_OWN</a></div><div class="ttdeci">#define ETH_DMATxDesc_OWN</div><div class="ttdoc">Ethernet DMA descriptors registers bits definition </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00388">stm32f4x7_eth.h:388</a></div></div>
<div class="ttc" id="struct_e_t_h___d_m_a_d_e_s_c_type_def_html_a85548fffc8ac6a92e6a347b56bb3ebdb"><div class="ttname"><a href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#a85548fffc8ac6a92e6a347b56bb3ebdb">ETH_DMADESCTypeDef::Buffer2NextDescAddr</a></div><div class="ttdeci">uint32_t Buffer2NextDescAddr</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00258">stm32f4x7_eth.h:258</a></div></div>
<div class="ttc" id="struct_e_t_h___d_m_a_d_e_s_c_type_def_html_aff9b5433372a58eec853246b7888d298"><div class="ttname"><a href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#aff9b5433372a58eec853246b7888d298">ETH_DMADESCTypeDef::Status</a></div><div class="ttdeci">__IO uint32_t Status</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00255">stm32f4x7_eth.h:255</a></div></div>
<div class="ttc" id="group___e_n_e_t___buffers__setting_html_ga32a48885102339e3cac943ddcbcce581"><div class="ttname"><a href="group___e_n_e_t___buffers__setting.html#ga32a48885102339e3cac943ddcbcce581">ETH_DMATxDesc_LS</a></div><div class="ttdeci">#define ETH_DMATxDesc_LS</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00390">stm32f4x7_eth.h:390</a></div></div>
<div class="ttc" id="struct_e_t_h___d_m_a_d_e_s_c_type_def_html_a22c9ee82e2904f4e3a21105fa6282cb3"><div class="ttname"><a href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html#a22c9ee82e2904f4e3a21105fa6282cb3">ETH_DMADESCTypeDef::ControlBufferSize</a></div><div class="ttdeci">uint32_t ControlBufferSize</div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8h_source.html#l00256">stm32f4x7_eth.h:256</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aba3e5334e3b8b90da879e5bba8db48bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba3e5334e3b8b90da879e5bba8db48bf">&#9670;&nbsp;</a></span>LAN8720_Get_Speed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 LAN8720_Get_Speed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="lan8720_8c_source.html">lan8720.c</a> 第 <a class="el" href="lan8720_8c_source.html#l00112">112</a> 行定义.</p>

<p class="reference">参考 <a class="el" href="stm32f4x7__eth_8c_source.html#l02164">ETH_ReadPHYRegister()</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    u8 speed;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    speed=((<a class="code" href="group___e_t_h___private___functions.html#ga7eb7fe9ad95d19b5a10eaa49c4d32f3d">ETH_ReadPHYRegister</a>(0x00,31)&amp;0x1C)&gt;&gt;2); <span class="comment">//从LAN8720的31号寄存器中读取网络速度和双工模式</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">return</span> speed;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div><div class="ttc" id="group___e_t_h___private___functions_html_ga7eb7fe9ad95d19b5a10eaa49c4d32f3d"><div class="ttname"><a href="group___e_t_h___private___functions.html#ga7eb7fe9ad95d19b5a10eaa49c4d32f3d">ETH_ReadPHYRegister</a></div><div class="ttdeci">uint16_t ETH_ReadPHYRegister(uint16_t PHYAddress, uint16_t PHYReg)</div><div class="ttdoc">Read a PHY register </div><div class="ttdef"><b>Definition:</b> <a href="stm32f4x7__eth_8c_source.html#l02164">stm32f4x7_eth.c:2164</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab64058e4d5e7068de8796f4967468cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab64058e4d5e7068de8796f4967468cb">&#9670;&nbsp;</a></span>LAN8720_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 LAN8720_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="lan8720_8c_source.html">lan8720.c</a> 第 <a class="el" href="lan8720_8c_source.html#l00034">34</a> 行定义.</p>

<p class="reference">参考 <a class="el" href="bsp__timer_8c_source.html#l00222">bsp_DelayMS()</a>, <a class="el" href="lan8720_8c_source.html#l00124">ETH_MACDMA_Config()</a>, <a class="el" href="io_8c_source.html#l00013">GPIO_InitStructure</a> , 以及 <a class="el" href="lan8720_8h_source.html#l00026">LAN8720_RST</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;{</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    u8 rval=0;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;     NVIC_InitTypeDef  NVIC_InitStructure;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;     GPIO_InitTypeDef <a class="code" href="io_8c.html#a58d8a7f3700f34e7226b33e61f5ed960">GPIO_InitStructure</a>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;     </div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;     RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA|RCC_AHB1Periph_GPIOC|RCC_AHB1Periph_GPIOG , ENABLE);<span class="comment">//使能GPIO时钟 RMII接口</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;     RCC_APB2PeriphClockCmd(RCC_APB2Periph_SYSCFG, ENABLE);   <span class="comment">//使能SYSCFG时钟</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  </div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;     SYSCFG_ETH_MediaInterfaceConfig(SYSCFG_ETH_MediaInterface_RMII); <span class="comment">//MAC和PHY之间使用RMII接口</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">/*网络引脚设置 RMII接口 </span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">      ETH_MDIO -------------------------&gt; PA2</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">      ETH_MDC --------------------------&gt; PC1</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">      ETH_RMII_REF_CLK------------------&gt; PA1</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">      ETH_RMII_CRS_DV ------------------&gt; PA7</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">      ETH_RMII_RXD0 --------------------&gt; PC4</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">      ETH_RMII_RXD1 --------------------&gt; PC5</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">      ETH_RMII_TX_EN -------------------&gt; PG11</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">      ETH_RMII_TXD0 --------------------&gt; PG13</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">      ETH_RMII_TXD1 --------------------&gt; PG14</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">      ETH_RESET-------------------------&gt; PD3*/</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                    </div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      <span class="comment">//配置PA1 PA2 PA7</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1|GPIO_Pin_2|GPIO_Pin_7;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL ;  </div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    </div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    GPIO_PinAFConfig(GPIOA, GPIO_PinSource1, GPIO_AF_ETH); <span class="comment">//引脚复用到网络接口上</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    GPIO_PinAFConfig(GPIOA, GPIO_PinSource2, GPIO_AF_ETH);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    GPIO_PinAFConfig(GPIOA, GPIO_PinSource7, GPIO_AF_ETH);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">//配置PC1,PC4 and PC5</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1 | GPIO_Pin_4 | GPIO_Pin_5;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    GPIO_Init(GPIOC, &amp;GPIO_InitStructure);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    GPIO_PinAFConfig(GPIOC, GPIO_PinSource1, GPIO_AF_ETH); <span class="comment">//引脚复用到网络接口上</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    GPIO_PinAFConfig(GPIOC, GPIO_PinSource4, GPIO_AF_ETH);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    GPIO_PinAFConfig(GPIOC, GPIO_PinSource5, GPIO_AF_ETH);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                </div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">//配置PG11, PG14 and PG13 </span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    GPIO_InitStructure.GPIO_Pin =  GPIO_Pin_11 | GPIO_Pin_13 | GPIO_Pin_14;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    GPIO_Init(GPIOG, &amp;GPIO_InitStructure);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    GPIO_PinAFConfig(GPIOG, GPIO_PinSource11, GPIO_AF_ETH);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    GPIO_PinAFConfig(GPIOG, GPIO_PinSource13, GPIO_AF_ETH);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    GPIO_PinAFConfig(GPIOG, GPIO_PinSource14, GPIO_AF_ETH);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    </div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">//配置PD3为推完输出</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;  <span class="comment">//推完输出</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL ;  </div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    GPIO_Init(GPIOD, &amp;GPIO_InitStructure);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <a class="code" href="lan8720_8h.html#ae0e5c40c7c09acb02d09117ae230ed27">LAN8720_RST</a>=0;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <a class="code" href="bsp__timer_8h.html#a494ebb73cb4af42a1e730fa836516c89">bsp_DelayMS</a>(50);  </div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <a class="code" href="lan8720_8h.html#ae0e5c40c7c09acb02d09117ae230ed27">LAN8720_RST</a>=1;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <a class="code" href="bsp__timer_8h.html#a494ebb73cb4af42a1e730fa836516c89">bsp_DelayMS</a>(50);    </div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;     </div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        NVIC_InitStructure.NVIC_IRQChannel = ETH_IRQn;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;   <span class="comment">/* 比串口优先级低 */</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        NVIC_Init(&amp;NVIC_InitStructure);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    </div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    rval=<a class="code" href="lan8720_8c.html#a040743fa91e95203428d08c8e96ee938">ETH_MACDMA_Config</a>();</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> !rval;               <span class="comment">//ETH的规则为:0,失败;1,成功;所以要取反一下 </span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div><div class="ttc" id="lan8720_8c_html_a040743fa91e95203428d08c8e96ee938"><div class="ttname"><a href="lan8720_8c.html#a040743fa91e95203428d08c8e96ee938">ETH_MACDMA_Config</a></div><div class="ttdeci">u8 ETH_MACDMA_Config(void)</div><div class="ttdef"><b>Definition:</b> <a href="lan8720_8c_source.html#l00124">lan8720.c:124</a></div></div>
<div class="ttc" id="lan8720_8h_html_ae0e5c40c7c09acb02d09117ae230ed27"><div class="ttname"><a href="lan8720_8h.html#ae0e5c40c7c09acb02d09117ae230ed27">LAN8720_RST</a></div><div class="ttdeci">#define LAN8720_RST</div><div class="ttdef"><b>Definition:</b> <a href="lan8720_8h_source.html#l00026">lan8720.h:26</a></div></div>
<div class="ttc" id="io_8c_html_a58d8a7f3700f34e7226b33e61f5ed960"><div class="ttname"><a href="io_8c.html#a58d8a7f3700f34e7226b33e61f5ed960">GPIO_InitStructure</a></div><div class="ttdeci">GPIO_InitTypeDef GPIO_InitStructure</div><div class="ttdef"><b>Definition:</b> <a href="io_8c_source.html#l00013">io.c:13</a></div></div>
<div class="ttc" id="bsp__timer_8h_html_a494ebb73cb4af42a1e730fa836516c89"><div class="ttname"><a href="bsp__timer_8h.html#a494ebb73cb4af42a1e730fa836516c89">bsp_DelayMS</a></div><div class="ttdeci">void bsp_DelayMS(uint32_t n)</div><div class="ttdef"><b>Definition:</b> <a href="bsp__timer_8c_source.html#l00222">bsp_timer.c:222</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">变量说明</h2>
<a id="ac299761c873bc0800842161379044225"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac299761c873bc0800842161379044225">&#9670;&nbsp;</a></span>DMA_RX_FRAME_infos</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_e_t_h___d_m_a___rx___frame__infos.html">ETH_DMA_Rx_Frame_infos</a>* DMA_RX_FRAME_infos</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="stm32f4x7__eth_8c_source.html">stm32f4x7_eth.c</a> 第 <a class="el" href="stm32f4x7__eth_8c_source.html#l00088">88</a> 行定义.</p>

<p class="reference">参考自 <a class="el" href="stm32f4x7__eth_8c_source.html#l01199">ETH_CheckFrameReceived()</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l01153">ETH_DMARxDescChainInit()</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l00957">ETH_Get_Received_Frame()</a> , 以及 <a class="el" href="stm32f4x7__eth_8c_source.html#l00996">ETH_Get_Received_Frame_interrupt()</a>.</p>

</div>
</div>
<a id="a11dd23e5e921c7799fe4083d2ab77df4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11dd23e5e921c7799fe4083d2ab77df4">&#9670;&nbsp;</a></span>DMARxDescToGet</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a>* DMARxDescToGet</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="stm32f4x7__eth_8c_source.html">stm32f4x7_eth.c</a> 第 <a class="el" href="stm32f4x7__eth_8c_source.html#l00082">82</a> 行定义.</p>

<p class="reference">参考自 <a class="el" href="stm32f4x7__eth_8c_source.html#l01199">ETH_CheckFrameReceived()</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l01153">ETH_DMARxDescChainInit()</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l00957">ETH_Get_Received_Frame()</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l00996">ETH_Get_Received_Frame_interrupt()</a>, <a class="el" href="lan8720_8c_source.html#l00177">ETH_IRQHandler()</a> , 以及 <a class="el" href="lan8720_8c_source.html#l00188">ETH_Rx_Packet()</a>.</p>

</div>
</div>
<a id="a9f40ac048abe15c5a78317dc8cbec4f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f40ac048abe15c5a78317dc8cbec4f0">&#9670;&nbsp;</a></span>DMARxDscrTab</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a>* DMARxDscrTab</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="lan8720_8c_source.html">lan8720.c</a> 第 <a class="el" href="lan8720_8c_source.html#l00026">26</a> 行定义.</p>

</div>
</div>
<a id="ad976d6d263332c7033345f1802063bd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad976d6d263332c7033345f1802063bd5">&#9670;&nbsp;</a></span>DMATxDescToSet</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a>* DMATxDescToSet</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="stm32f4x7__eth_8c_source.html">stm32f4x7_eth.c</a> 第 <a class="el" href="stm32f4x7__eth_8c_source.html#l00081">81</a> 行定义.</p>

<p class="reference">参考自 <a class="el" href="stm32f4x7__eth_8c_source.html#l01241">ETH_DMATxDescChainInit()</a>, <a class="el" href="lan8720_8c_source.html#l00240">ETH_GetCurrentTxBuffer()</a>, <a class="el" href="stm32f4x7__eth_8c_source.html#l01071">ETH_Prepare_Transmit_Descriptors()</a> , 以及 <a class="el" href="lan8720_8c_source.html#l00221">ETH_Tx_Packet()</a>.</p>

</div>
</div>
<a id="a920a8f0f87c36e36706f6451f6b90152"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a920a8f0f87c36e36706f6451f6b90152">&#9670;&nbsp;</a></span>DMATxDscrTab</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_e_t_h___d_m_a_d_e_s_c_type_def.html">ETH_DMADESCTypeDef</a>* DMATxDscrTab</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="lan8720_8c_source.html">lan8720.c</a> 第 <a class="el" href="lan8720_8c_source.html#l00027">27</a> 行定义.</p>

</div>
</div>
<a id="af34dce86974420c070b2354fbd7e045e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af34dce86974420c070b2354fbd7e045e">&#9670;&nbsp;</a></span>Rx_Buff</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* Rx_Buff</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="lan8720_8c_source.html">lan8720.c</a> 第 <a class="el" href="lan8720_8c_source.html#l00028">28</a> 行定义.</p>

<p class="reference">参考自 <a class="el" href="lan8720_8c_source.html#l00261">ETH_Mem_Free()</a> , 以及 <a class="el" href="lan8720_8c_source.html#l00247">ETH_Mem_Malloc()</a>.</p>

</div>
</div>
<a id="ad8719ffa27fb73862d0f77656bfd92d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8719ffa27fb73862d0f77656bfd92d5">&#9670;&nbsp;</a></span>Tx_Buff</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* Tx_Buff</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">在文件 <a class="el" href="lan8720_8c_source.html">lan8720.c</a> 第 <a class="el" href="lan8720_8c_source.html#l00029">29</a> 行定义.</p>

<p class="reference">参考自 <a class="el" href="lan8720_8c_source.html#l00261">ETH_Mem_Free()</a> , 以及 <a class="el" href="lan8720_8c_source.html#l00247">ETH_Mem_Malloc()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
